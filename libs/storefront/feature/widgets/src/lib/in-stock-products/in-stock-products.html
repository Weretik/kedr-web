<div class="bg-neutral-50 dark:bg-surface-900 px-6 py-20 md:px-12 lg:px-20">
  <div class="flex flex-col gap-8">
    <div class="flex flex-col gap-2">
      <div
        class="text-surface-900 dark:text-surface-0 text-5xl font-semibold leading-tight"
      >
        Асортимент дверної фурнітури
      </div>
      <div
        class="text-surface-600 dark:text-surface-200 text-xl font-normal leading-tight"
      >
        широкий вибір товарів завжди у наявності на складі для швидкої
        комплектації та відвантаження
      </div>
    </div>

    <div class="card">
      @if (isLoading()) {
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        @for (i of [1,2,3]; track $index) {
        <div
          class="border border-surface-200 dark:border-surface-700 rounded m-2 p-4"
        >
          <p-skeleton width="100%" height="200px" />
          <p-skeleton width="80%" height="1.5rem" class="mt-4" />
          <div class="flex justify-between items-center mt-4">
            <p-skeleton width="40%" height="2rem" />
            <p-skeleton width="3rem" height="3rem" borderRadius="50%" />
          </div>
        </div>
        }
      </div>
      } @else if (error()) {
      <div
        class="p-8 text-center border border-surface-200 dark:border-surface-700 rounded-lg"
      >
        <i class="pi pi-exclamation-circle text-red-500 text-4xl mb-4"></i>
        <p class="text-surface-600 dark:text-surface-200 text-xl">
          Не вдалося завантажити товари. Будь ласка, спробуйте пізніше.
        </p>
      </div>
      } @else {
      <p-carousel
        [value]="products()"
        [numVisible]="3"
        [numScroll]="1"
        [responsiveOptions]="responsiveOptions"
      >
        <ng-template let-product #item>
          <div
            class="border border-surface-200 dark:border-surface-700 rounded m-2 p-4"
          >
            <div class="mb-4">
              <div class="relative mx-auto">
                <div
                  class="w-full aspect-3/2 rounded-border overflow-hidden bg-white dark:bg-bg-white flex items-center justify-center"
                >
                  <img
                    [src]="product?.photo ?? ''"
                    [alt]="product?.name ?? ''"
                    class="w-full h-full object-contain"
                    loading="lazy"
                  />
                </div>
                <div class="absolute left-3 top-3 flex flex-col gap-1">
                  <p-tag
                    [value]="product?.inStock ? 'В наявності' : 'Немає'"
                    [severity]="product?.inStock ? 'success' : 'danger'"
                    class="text-xs! text-white! [&_.p-tag-label]:text-white!"
                  />
                  <p-tag
                    value="Хіт"
                    [severity]="'warn'"
                    class="text-xs! text-white! [&_.p-tag-label]:text-white!"
                  />
                </div>
              </div>
            </div>

            <p class="mb-4 font-medium line-clamp-2 min-h-12">
              {{ product?.name ?? '' }}
            </p>
            <div class="flex justify-between items-center">
              <div class="mt-0 font-semibold text-xl">
                {{ (product?.price ?? 0) + ' грн.' }}
              </div>
              <span>
                <p-button
                  icon="pi pi-heart"
                  severity="secondary"
                  [outlined]="true"
                />
                <p-button
                  icon="pi pi-shopping-cart"
                  styleClass="ml-2"
                  (onClick)="addToCart(product)"
                />
              </span>
            </div>
          </div>
        </ng-template>
      </p-carousel>
      }
    </div>
  </div>
</div>
